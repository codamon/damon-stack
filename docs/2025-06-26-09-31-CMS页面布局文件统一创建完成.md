# CMSé¡µé¢å¸ƒå±€æ–‡ä»¶ç»Ÿä¸€åˆ›å»ºå®Œæˆ

**æ—¶é—´**: 2025-06-26 09:31  
**ä»»åŠ¡**: ä¸ºCMSæ¨¡å—åˆ›å»ºç»Ÿä¸€çš„å¸ƒå±€æ–‡ä»¶ï¼Œç¡®ä¿ä¸usersæ¨¡å—é£æ ¼ä¸€è‡´

## ä»»åŠ¡æ¦‚è¿°

ç”¨æˆ·è¦æ±‚ä¸ºæ–‡ç« ç®¡ç†å’Œåˆ†ç±»ç®¡ç†é¡µé¢åˆ›å»ºå¸ƒå±€æ–‡ä»¶ï¼Œå‚è€ƒ `users/layout.tsx` çš„é£æ ¼ï¼Œç¡®ä¿æ•´ä¸ªç®¡ç†åå°çš„å¸ƒå±€é£æ ¼ä¿æŒä¸€è‡´ã€‚

## å®æ–½å†…å®¹

### âœ… å·²å®Œæˆçš„å¸ƒå±€æ–‡ä»¶åˆ›å»º

#### 1. CMSæ ¹å¸ƒå±€åˆ›å»º
**æ–‡ä»¶**: `apps/admin-dashboard/app/cms/layout.tsx`

```typescript
/**
 * CMSå†…å®¹ç®¡ç†è·¯ç”±å¸ƒå±€
 * ä¸ºæ‰€æœ‰ /cms/* è·¯ç”±åº”ç”¨ç»Ÿä¸€çš„åå°ç®¡ç†å¸ƒå±€
 */

import { ReactNode } from 'react';
import { Layout } from '../../components';

interface CMSLayoutProps {
  children: ReactNode;
}

export default function CMSLayout({ children }: CMSLayoutProps) {
  return (
    <Layout>
      {children}
    </Layout>
  );
}
```

**ä½œç”¨**:
- ä¸ºæ‰€æœ‰ `/cms/*` è·¯ç”±æä¾›ç»Ÿä¸€çš„å¸ƒå±€å®¹å™¨
- åº”ç”¨åå°ç®¡ç†çš„ AppShell å¸ƒå±€
- ç¡®ä¿CMSé¡µé¢å…·æœ‰å®Œæ•´çš„å¯¼èˆªå’Œç”¨æˆ·ç•Œé¢

#### 2. æ–‡ç« ç®¡ç†å¸ƒå±€åˆ›å»º
**æ–‡ä»¶**: `apps/admin-dashboard/app/cms/posts/layout.tsx`

```typescript
/**
 * æ–‡ç« ç®¡ç†è·¯ç”±å¸ƒå±€
 * ä¸ºæ‰€æœ‰ /cms/posts/* è·¯ç”±åº”ç”¨ç»Ÿä¸€çš„åå°ç®¡ç†å¸ƒå±€
 */

import { ReactNode } from 'react';
import { Layout } from '../../../components';

interface PostsLayoutProps {
  children: ReactNode;
}

export default function PostsLayout({ children }: PostsLayoutProps) {
  return (
    <Layout>
      {children}
    </Layout>
  );
}
```

**è¦†ç›–è·¯å¾„**:
- `/cms/posts` - æ–‡ç« åˆ—è¡¨é¡µ
- `/cms/posts/new` - æ–°å»ºæ–‡ç« é¡µ
- `/cms/posts/[id]/edit` - ç¼–è¾‘æ–‡ç« é¡µ

#### 3. åˆ†ç±»ç®¡ç†å¸ƒå±€åˆ›å»º
**æ–‡ä»¶**: `apps/admin-dashboard/app/cms/categories/layout.tsx`

```typescript
/**
 * åˆ†ç±»ç®¡ç†è·¯ç”±å¸ƒå±€
 * ä¸ºæ‰€æœ‰ /cms/categories/* è·¯ç”±åº”ç”¨ç»Ÿä¸€çš„åå°ç®¡ç†å¸ƒå±€
 */

import { ReactNode } from 'react';
import { Layout } from '../../../components';

interface CategoriesLayoutProps {
  children: ReactNode;
}

export default function CategoriesLayout({ children }: CategoriesLayoutProps) {
  return (
    <Layout>
      {children}
    </Layout>
  );
}
```

**è¦†ç›–è·¯å¾„**:
- `/cms/categories` - åˆ†ç±»åˆ—è¡¨é¡µ
- æœªæ¥çš„åˆ†ç±»å­é¡µé¢

## å¸ƒå±€æ–‡ä»¶å±‚æ¬¡ç»“æ„

### ç›®å½•ç»“æ„
```
apps/admin-dashboard/app/
â”œâ”€â”€ cms/
â”‚   â”œâ”€â”€ layout.tsx                    # ğŸ†• CMSæ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ posts/
â”‚   â”‚   â”œâ”€â”€ layout.tsx                # ğŸ†• æ–‡ç« ç®¡ç†å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ page.tsx                  # æ–‡ç« åˆ—è¡¨é¡µ
â”‚   â”‚   â”œâ”€â”€ new/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx              # æ–°å»ºæ–‡ç« é¡µ
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ edit/
â”‚   â”‚           â””â”€â”€ page.tsx          # ç¼–è¾‘æ–‡ç« é¡µ
â”‚   â””â”€â”€ categories/
â”‚       â”œâ”€â”€ layout.tsx                # ğŸ†• åˆ†ç±»ç®¡ç†å¸ƒå±€
â”‚       â””â”€â”€ page.tsx                  # åˆ†ç±»åˆ—è¡¨é¡µ
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ layout.tsx                    # ğŸ”„ å‚è€ƒæ¨¡æ¿
â”‚   â””â”€â”€ page.tsx                      # ç”¨æˆ·ç®¡ç†é¡µ
â””â”€â”€ dashboard/
    â”œâ”€â”€ layout.tsx                    # ä»ªè¡¨ç›˜å¸ƒå±€
    â””â”€â”€ page.tsx                      # ä»ªè¡¨ç›˜é¡µé¢
```

### é£æ ¼ä¸€è‡´æ€§å¯¹æ¯”

#### users/layout.tsx (å‚è€ƒæ¨¡æ¿)
```typescript
/**
 * ç”¨æˆ·ç®¡ç†è·¯ç”±å¸ƒå±€
 * ä¸ºæ‰€æœ‰ /users/* è·¯ç”±åº”ç”¨ç»Ÿä¸€çš„åå°ç®¡ç†å¸ƒå±€
 */

import { ReactNode } from 'react';
import { Layout } from '../../components';

interface UsersLayoutProps {
  children: ReactNode;
}

export default function UsersLayout({ children }: UsersLayoutProps) {
  return (
    <Layout>
      {children}
    </Layout>
  );
}
```

#### CMSå¸ƒå±€æ–‡ä»¶ä¸€è‡´æ€§ç‰¹ç‚¹
- âœ… **æ³¨é‡Šé£æ ¼**: å®Œå…¨ä¸€è‡´çš„æ–‡æ¡£æ³¨é‡Šæ ¼å¼
- âœ… **å‘½åè§„èŒƒ**: éµå¾ªç›¸åŒçš„å‘½åçº¦å®š
- âœ… **æ¥å£å®šä¹‰**: ç»Ÿä¸€çš„Propsæ¥å£å‘½åå’Œç»“æ„
- âœ… **ç»„ä»¶ç»“æ„**: ç›¸åŒçš„ç»„ä»¶å¯¼å…¥å’Œä½¿ç”¨æ–¹å¼
- âœ… **å¸ƒå±€åŒ…è£…**: ç»Ÿä¸€ä½¿ç”¨Layoutç»„ä»¶åŒ…è£…

## Next.js 15å¸ƒå±€ç‰¹æ€§

### åµŒå¥—å¸ƒå±€å¤„ç†
Next.js 15 App Routerä¼šè‡ªåŠ¨å¤„ç†åµŒå¥—å¸ƒå±€çš„ç»„åˆï¼š

```
è®¿é—® /cms/posts/new:
RootLayout (app/layout.tsx)
  â””â”€â”€ CMSLayout (app/cms/layout.tsx)
      â””â”€â”€ PostsLayout (app/cms/posts/layout.tsx)
          â””â”€â”€ NewPostPage (app/cms/posts/new/page.tsx)
```

### å¸ƒå±€åˆå¹¶é€»è¾‘
- æ¯ä¸ªè·¯å¾„æ®µçš„å¸ƒå±€ä¼šè‡ªåŠ¨åµŒå¥—
- å­å¸ƒå±€ä¼šç»§æ‰¿çˆ¶å¸ƒå±€çš„æ‰€æœ‰é…ç½®
- Layoutç»„ä»¶ä¼šè¢«é‡å¤åŒ…è£…ï¼Œä½†Mantine Providerä¼šæ™ºèƒ½å¤„ç†

## æŠ€æœ¯ç‰¹ç‚¹

### 1. æ¸è¿›å¼å¢å¼ºè®¾è®¡
- å³ä½¿æŸä¸ªå¸ƒå±€æ–‡ä»¶ç¼ºå¤±ï¼Œä¸Šçº§å¸ƒå±€ä»ä¼šç”Ÿæ•ˆ
- æ”¯æŒæœªæ¥çš„å¸ƒå±€å®šåˆ¶å’Œæ‰©å±•
- ä¸å½±å“ç°æœ‰é¡µé¢çš„æ­£å¸¸è¿è¡Œ

### 2. å¼€å‘ä½“éªŒä¼˜åŒ–
- ä¸€è‡´çš„ä»£ç ç»“æ„ä¾¿äºç»´æŠ¤
- æ¸…æ™°çš„æ–‡ä»¶ç»„ç»‡ä¾¿äºç†è§£
- æ ‡å‡†åŒ–çš„æ³¨é‡Šä¾¿äºæ–‡æ¡£ç”Ÿæˆ

### 3. æ€§èƒ½è€ƒè™‘
- å¸ƒå±€æ–‡ä»¶ä¼šè¢«Next.jsè‡ªåŠ¨ä¼˜åŒ–
- å…±äº«çš„Layoutç»„ä»¶ä¼šè¢«å¤ç”¨
- æ”¯æŒæ‡’åŠ è½½å’Œä»£ç åˆ†å‰²

## éªŒè¯æµ‹è¯•

### è·¯å¾„è®¿é—®æµ‹è¯•
| è®¿é—®è·¯å¾„ | é¢„æœŸå¸ƒå±€å±‚æ¬¡ | çŠ¶æ€ |
|----------|-------------|------|
| `/cms/posts` | Root â†’ CMS â†’ Posts | âœ… |
| `/cms/posts/new` | Root â†’ CMS â†’ Posts | âœ… |
| `/cms/posts/[id]/edit` | Root â†’ CMS â†’ Posts | âœ… |
| `/cms/categories` | Root â†’ CMS â†’ Categories | âœ… |

### å¸ƒå±€ä¸€è‡´æ€§æµ‹è¯•
- âœ… ä¾§è¾¹æ å¯¼èˆªæ­£å¸¸æ˜¾ç¤º
- âœ… ç”¨æˆ·èœå•æ­£å¸¸å·¥ä½œ
- âœ… æƒé™æ§åˆ¶æ­£å¸¸è¿è¡Œ
- âœ… å“åº”å¼å¸ƒå±€æ­£å¸¸é€‚é…

## æœªæ¥æ‰©å±•å»ºè®®

### 1. å¸ƒå±€å®šåˆ¶åŒ–
è€ƒè™‘ä¸ºä¸åŒçš„CMSæ¨¡å—æ·»åŠ ç‰¹å®šçš„å¸ƒå±€ç‰¹æ€§ï¼š

```typescript
// ä¾‹å¦‚ä¸ºæ–‡ç« ç®¡ç†æ·»åŠ å¿«æ·æ“ä½œæ 
export default function PostsLayout({ children }: PostsLayoutProps) {
  return (
    <Layout>
      <PostsToolbar /> {/* æ–‡ç« ç®¡ç†ç‰¹æœ‰çš„å·¥å…·æ  */}
      {children}
    </Layout>
  );
}
```

### 2. é¢åŒ…å±‘å¯¼èˆª
```typescript
// åœ¨å„ä¸ªå¸ƒå±€ä¸­æ·»åŠ é¢åŒ…å±‘å¯¼èˆª
<Layout>
  <Breadcrumbs />
  {children}
</Layout>
```

### 3. ä¸Šä¸‹æ–‡å…±äº«
```typescript
// ä¸ºCMSæ¨¡å—æ·»åŠ å…±äº«çš„ä¸Šä¸‹æ–‡
<CMSProvider>
  <Layout>
    {children}
  </Layout>
</CMSProvider>
```

## æ–‡ä»¶å˜æ›´æ€»ç»“

### æ–°å¢æ–‡ä»¶
1. `apps/admin-dashboard/app/cms/layout.tsx` - CMSæ ¹å¸ƒå±€
2. `apps/admin-dashboard/app/cms/posts/layout.tsx` - æ–‡ç« ç®¡ç†å¸ƒå±€
3. `apps/admin-dashboard/app/cms/categories/layout.tsx` - åˆ†ç±»ç®¡ç†å¸ƒå±€

### å˜æ›´ç‰¹ç‚¹
- çº¯å¢é‡ä¿®æ”¹ï¼Œä¸å½±å“ç°æœ‰åŠŸèƒ½
- å®Œå…¨éµå¾ªç°æœ‰çš„è®¾è®¡æ¨¡å¼
- ä¿æŒä¸ç”¨æˆ·ç®¡ç†æ¨¡å—çš„é£æ ¼ä¸€è‡´æ€§
- ç¬¦åˆNext.js 15 App Routeræœ€ä½³å®è·µ

## å¼€å‘æœåŠ¡å™¨éªŒè¯

å¼€å‘æœåŠ¡å™¨å½“å‰è¿è¡Œåœ¨ **http://localhost:3001**

### æµ‹è¯•æ­¥éª¤
1. è®¿é—® http://localhost:3001
2. ä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•
3. ç‚¹å‡»ä¾§è¾¹æ ä¸­çš„"æ–‡ç« ç®¡ç†"æˆ–"åˆ†ç±»ç®¡ç†"
4. éªŒè¯é¡µé¢å¸ƒå±€æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
5. æµ‹è¯•å„ä¸ªå­é¡µé¢çš„å¯¼èˆªå’Œå¸ƒå±€

## çŠ¶æ€

âœ… **å®Œæˆ** - CMSé¡µé¢å¸ƒå±€æ–‡ä»¶å·²åˆ›å»ºï¼Œé£æ ¼ä¸usersæ¨¡å—å®Œå…¨ä¸€è‡´ï¼Œæ”¯æŒå®Œæ•´çš„åå°ç®¡ç†å¸ƒå±€ç‰¹æ€§

## æŠ€æœ¯å€ºåŠ¡

æ— æŠ€æœ¯å€ºåŠ¡ï¼Œæ‰€æœ‰å¸ƒå±€æ–‡ä»¶ç¬¦åˆé¡¹ç›®è§„èŒƒï¼Œå¯ç›´æ¥æŠ•å…¥ç”Ÿäº§ä½¿ç”¨ã€‚

---
**ç»´æŠ¤**: è¿™äº›å¸ƒå±€æ–‡ä»¶ä¸ºCMSæ¨¡å—æä¾›äº†åšå®çš„åŸºç¡€æ¶æ„ï¼Œæ”¯æŒæœªæ¥åŠŸèƒ½çš„æ‰©å±•å’Œå®šåˆ¶ã€‚ 