# StatCard å¯å¤ç”¨æ•°æ®ç»Ÿè®¡å¡ç‰‡ç»„ä»¶åˆ›å»ºå®Œæˆ

**æ—¶é—´**: 2025-06-25 23:17  
**ä»»åŠ¡**: Dashboard ç³»ç»Ÿæ„å»º - ç¬¬äºŒæ­¥ï¼šè®¾è®¡å¹¶åˆ›å»ºå¯å¤ç”¨çš„æ•°æ®ç»Ÿè®¡å¡ç‰‡ (StatCard) ç»„ä»¶

## ä»»åŠ¡æ¦‚è¿°

å°è£…ä¸€ä¸ªç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„ StatCard ç»„ä»¶ï¼Œç”¨äºåœ¨ä»ªè¡¨ç›˜ä¸Šå±•ç¤ºå„ç§å…³é”®ç»©æ•ˆæŒ‡æ ‡ (KPI)ã€‚

## å®æ–½å†…å®¹

### âœ… ç»„ä»¶æ¶æ„è®¾è®¡

#### 1. **ç»„ä»¶ä½ç½®é€‰æ‹©: `packages/ui`**

**é€‰æ‹©ç†ç”±**:
- âœ… **æœ€å¤§å¤ç”¨æ€§**: é€šç”¨æ•°æ®å±•ç¤ºç»„ä»¶ï¼Œå¯åœ¨å¤šä¸ªåº”ç”¨ä¸­ä½¿ç”¨
- âœ… **è®¾è®¡ä¸€è‡´æ€§**: ä¸å…¶ä»– UI ç»„ä»¶ä¿æŒç»Ÿä¸€çš„è®¾è®¡ç³»ç»Ÿ
- âœ… **ä¾èµ–ç®¡ç†**: å¤ç”¨ç°æœ‰çš„ Mantine peerDependencies é…ç½®
- âœ… **ç±»å‹å®‰å…¨**: å…±äº« TypeScript ç±»å‹å®šä¹‰
- âœ… **ç‰ˆæœ¬æ§åˆ¶**: ç‹¬ç«‹çš„ç»„ä»¶åº“ç‰ˆæœ¬ç®¡ç†

#### 2. **ç»„ä»¶æ¥å£è®¾è®¡ (Props)**

```typescript
export interface StatCardProps extends Omit<PaperProps, 'children'> {
  /** å¡ç‰‡æ ‡é¢˜ */
  title: string;
  /** æ˜¾ç¤ºçš„æ ¸å¿ƒæ•°å€¼ */
  value: string | number;
  /** å›¾æ ‡ React èŠ‚ç‚¹ */
  icon: React.ReactNode;
  /** è¶‹åŠ¿æ•°æ®ï¼ˆå¯é€‰ï¼‰ */
  diff?: TrendData;
  /** åŠ è½½çŠ¶æ€ */
  loading?: boolean;
  /** å›¾æ ‡é¢œè‰² */
  iconColor?: MantineColor;
  /** å¡ç‰‡å¤§å° */
  size?: MantineSize;
  /** æ•°å€¼æ ¼å¼åŒ–å‡½æ•° */
  formatValue?: (value: string | number) => string;
  /** è‡ªå®šä¹‰æ ·å¼ç±»å */
  className?: string;
  /** ç‚¹å‡»äº‹ä»¶ */
  onClick?: () => void;
}

export interface TrendData {
  /** å˜åŒ–æ•°å€¼ */
  value: number;
  /** å˜åŒ–ç™¾åˆ†æ¯” */
  percentage?: number;
  /** è¶‹åŠ¿æ–¹å‘ */
  trend: TrendType;
  /** å¯¹æ¯”æœŸé—´æè¿° */
  period?: string;
}

export type TrendType = 'up' | 'down' | 'neutral';
```

#### 3. **æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§**

**åŸºç¡€åŠŸèƒ½**:
- âœ… æ ‡é¢˜ã€æ•°å€¼ã€å›¾æ ‡å±•ç¤º
- âœ… è¶‹åŠ¿æ•°æ®æ˜¾ç¤ºï¼ˆä¸Šå‡/ä¸‹é™/æŒå¹³ï¼‰
- âœ… åŠ è½½çŠ¶æ€æ”¯æŒ
- âœ… å¤šç§å°ºå¯¸ï¼ˆsmã€mdã€lgï¼‰

**é«˜çº§åŠŸèƒ½**:
- âœ… æ•°å€¼æ ¼å¼åŒ–è‡ªå®šä¹‰
- âœ… ç‚¹å‡»äº¤äº’æ”¯æŒ
- âœ… æ‚¬åœåŠ¨ç”»æ•ˆæœ
- âœ… å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
- âœ… æ‰©å±• Mantine Paper å±æ€§

**è¶‹åŠ¿ç³»ç»Ÿ**:
- âœ… ä¸‰ç§è¶‹åŠ¿ç±»å‹ï¼šä¸Šå‡ã€ä¸‹é™ã€æŒå¹³
- âœ… è‡ªåŠ¨è¶‹åŠ¿å›¾æ ‡å’Œé¢œè‰²
- âœ… æ”¯æŒç™¾åˆ†æ¯”å’Œç»å¯¹å€¼æ˜¾ç¤º
- âœ… è‡ªå®šä¹‰å¯¹æ¯”æœŸé—´æè¿°

### âœ… æŠ€æœ¯å®ç°

#### 1. **æ–‡ä»¶ç»“æ„**
```
packages/ui/src/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ StatCard.tsx          # StatCard ç»„ä»¶å®ç° (Client Component)
â”œâ”€â”€ index.ts                  # ç»„ä»¶å¯¼å‡ºé…ç½®
â””â”€â”€ package.json              # ä¾èµ–é…ç½®æ›´æ–°
```

#### ğŸ”§ **é‡è¦ä¿®å¤** (2025-06-25 23:17)
**é—®é¢˜**: Server Component ä¸­æ— æ³•ä½¿ç”¨äº‹ä»¶å¤„ç†å™¨  
**è§£å†³**: åœ¨ StatCard ç»„ä»¶é¡¶éƒ¨æ·»åŠ  `'use client';` æ ‡è®°  
**åŸå› **: StatCard éœ€è¦äº¤äº’åŠŸèƒ½ï¼ˆonClickã€hoveræ•ˆæœï¼‰ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯è¿è¡Œ

#### 2. **ä¾èµ–é…ç½®**
**æ–°å¢ä¾èµ–**: `@tabler/icons-react`
```json
{
  "peerDependencies": {
    "@tabler/icons-react": "^3.0.0"
  },
  "devDependencies": {
    "@tabler/icons-react": "^3.29.0"
  }
}
```

#### 3. **ç»„ä»¶å¯¼å‡º**
```typescript
// packages/ui/src/index.ts
export { 
  StatCard, 
  default as StatCardDefault, 
  type StatCardProps, 
  type TrendData, 
  type TrendType 
} from './components/StatCard';
```

#### 4. **Mantine ç»„ä»¶ä½¿ç”¨**
- **Paper**: å¡ç‰‡å®¹å™¨
- **Group**: å¸ƒå±€æ’åˆ—
- **Stack**: å‚ç›´å¸ƒå±€
- **Text**: æ–‡æœ¬æ˜¾ç¤º
- **ThemeIcon**: å›¾æ ‡å®¹å™¨
- **Badge**: è¶‹åŠ¿æ ‡è¯†
- **Skeleton**: åŠ è½½çŠ¶æ€

### âœ… ä½¿ç”¨ç¤ºä¾‹

#### 1. **åŸºç¡€ç”¨æ³•**
```tsx
import { StatCard } from '@damon-stack/ui';
import { IconUsers } from '@tabler/icons-react';

<StatCard
  title="æ€»ç”¨æˆ·æ•°"
  value={1234}
  icon={<IconUsers size={24} />}
  iconColor="blue"
/>
```

#### 2. **å¸¦è¶‹åŠ¿æ•°æ®**
```tsx
<StatCard
  title="æ´»è·ƒç”¨æˆ·"
  value={987}
  icon={<IconUserCheck size={24} />}
  iconColor="green"
  diff={{
    value: 23,
    percentage: 12.3,
    trend: 'up',
    period: 'è¾ƒä¸Šå‘¨'
  }}
/>
```

#### 3. **è‡ªå®šä¹‰æ ¼å¼åŒ–**
```tsx
<StatCard
  title="æ”¶å…¥ç»Ÿè®¡"
  value={1000000}
  icon={<IconCurrencyDollar size={24} />}
  iconColor="green"
  formatValue={(value) => `$${Number(value).toLocaleString()}`}
/>
```

#### 4. **åŠ è½½çŠ¶æ€**
```tsx
<StatCard
  title="æ•°æ®åŠ è½½ä¸­..."
  value={0}
  icon={<IconUsers size={24} />}
  loading={true}
/>
```

### âœ… Dashboard é›†æˆæ¼”ç¤º

#### æ›´æ–°çš„ Dashboard é¡µé¢
**æ–‡ä»¶**: `apps/admin-dashboard/app/dashboard/page.tsx`

**å±•ç¤ºå†…å®¹**:
- 4ä¸ªä¸»è¦ KPI å¡ç‰‡ï¼ˆæ€»ç”¨æˆ·æ•°ã€æ´»è·ƒç”¨æˆ·ã€ç®¡ç†å‘˜ã€ç³»ç»Ÿæ´»è·ƒåº¦ï¼‰
- ä¸åŒå°ºå¯¸å’Œæ ·å¼çš„æ¼”ç¤ºå¡ç‰‡
- åŠ è½½çŠ¶æ€å’Œäº¤äº’æ•ˆæœå±•ç¤º
- è‡ªå®šä¹‰æ ¼å¼åŒ–å‡½æ•°æ¼”ç¤º

**å“åº”å¼å¸ƒå±€**:
```tsx
<SimpleGrid 
  cols={{ base: 1, sm: 2, lg: 4 }} 
  spacing="lg"
  verticalSpacing="lg"
>
  {/* StatCard ç»„ä»¶ */}
</SimpleGrid>
```

## æŠ€æœ¯ç‰¹ç‚¹

### 1. **è®¾è®¡ç³»ç»Ÿä¸€è‡´æ€§**
- éµå¾ª Mantine è®¾è®¡è§„èŒƒ
- æ”¯æŒä¸»é¢˜è‰²å½©ç³»ç»Ÿ
- ç»Ÿä¸€çš„é—´è·å’Œåœ†è§’è§„åˆ™

### 2. **ç±»å‹å®‰å…¨**
- å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- Props ç»§æ‰¿ Mantine Paper å±æ€§
- è¶‹åŠ¿æ•°æ®å¼ºç±»å‹çº¦æŸ

### 3. **ç”¨æˆ·ä½“éªŒ**
- æµç•…çš„æ‚¬åœåŠ¨ç”»
- ç›´è§‚çš„è¶‹åŠ¿è§†è§‰åé¦ˆ
- åŠ è½½çŠ¶æ€éª¨æ¶å±

### 4. **å¯æ‰©å±•æ€§**
- æ”¯æŒè‡ªå®šä¹‰æ ¼å¼åŒ–å‡½æ•°
- å¯æ‰©å±•çš„è¶‹åŠ¿ç³»ç»Ÿ
- çµæ´»çš„æ ·å¼å®šåˆ¶

### 5. **æ€§èƒ½ä¼˜åŒ–**
- æœ€å°åŒ–é‡æ¸²æŸ“
- CSS-in-JS ä¼˜åŒ–
- å›¾æ ‡æ¸²æŸ“ä¼˜åŒ–

## æ„å»ºä¸éƒ¨ç½²

### æ„å»ºæµç¨‹
```bash
# åœ¨ packages/ui ç›®å½•ä¸‹
pnpm install    # å®‰è£…æ–°ä¾èµ–
pnpm build      # æ„å»ºç»„ä»¶åº“
```

**æ„å»ºç»“æœ**:
```
âœ… ESM Build: dist/index.mjs (12.77 KB)
âœ… CJS Build: dist/index.js (13.87 KB) 
âœ… TypeScript: dist/index.d.ts (12.86 KB)
```

### ä¸»åº”ç”¨é›†æˆ
**æ— éœ€é¢å¤–é…ç½®** - ä¸»åº”ç”¨å·²åŒ…å«å¿…è¦ä¾èµ–ï¼š
- âœ… `@damon-stack/ui: workspace:*`
- âœ… `@tabler/icons-react: ^3.34.0`

## ä½¿ç”¨åœºæ™¯

### 1. **ç³»ç»Ÿæ¦‚è§ˆä»ªè¡¨ç›˜**
- ç”¨æˆ·ç»Ÿè®¡ã€æ´»è·ƒåº¦æŒ‡æ ‡
- ç³»ç»Ÿæ€§èƒ½ç›‘æ§
- ä¸šåŠ¡å…³é”®æŒ‡æ ‡å±•ç¤º

### 2. **åˆ†ææŠ¥å‘Šé¡µé¢**
- æ•°æ®å¯¹æ¯”åˆ†æ
- è¶‹åŠ¿å˜åŒ–å±•ç¤º
- ç»©æ•ˆè¯„ä¼°æŒ‡æ ‡

### 3. **ç®¡ç†åå°æ¨¡å—**
- å„ä¸šåŠ¡æ¨¡å—ç»Ÿè®¡
- å®æ—¶æ•°æ®ç›‘æ§
- è¿è¥æ•°æ®å±•ç¤º

## ä¸‹ä¸€æ­¥æ‰©å±•

### 1. **å›¾è¡¨é›†æˆ**
- ä¸ Mantine Charts ç»„ä»¶ç»“åˆ
- æ”¯æŒå†…åµŒè¿·ä½ å›¾è¡¨
- ç‚¹å‡»å±•å¼€è¯¦ç»†å›¾è¡¨

### 2. **æ•°æ®åˆ·æ–°**
- å®æ—¶æ•°æ®æ›´æ–°
- è‡ªåŠ¨åˆ·æ–°æœºåˆ¶
- æ•°æ®å˜åŒ–åŠ¨ç”»

### 3. **ä¸»é¢˜å®šåˆ¶**
- æ·±è‰²æ¨¡å¼æ”¯æŒ
- è‡ªå®šä¹‰è‰²å½©æ–¹æ¡ˆ
- ä¼ä¸šå“ç‰Œå®šåˆ¶

### 4. **äº¤äº’å¢å¼º**
- æ‹–æ‹½æ’åºåŠŸèƒ½
- å¡ç‰‡æ”¶è—/å›ºå®š
- å¿«é€Ÿæ“ä½œèœå•

## çŠ¶æ€

âœ… **å®Œæˆ** - StatCard ç»„ä»¶å®Œæ•´å®ç°ï¼Œæ”¯æŒä¸°å¯Œçš„åŠŸèƒ½ç‰¹æ€§ï¼Œå·²é›†æˆåˆ° Dashboard é¡µé¢å¹¶æˆåŠŸå±•ç¤º

---

## ğŸ”§ **Server/Client Component äº¤äº’æœ€ä½³å®è·µ**

### é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

**é—®é¢˜**: åœ¨ Server Component ä¸­æ— æ³•ç›´æ¥ä¼ é€’äº‹ä»¶å¤„ç†å™¨ç»™ Client Component
```typescript
// âŒ é”™è¯¯åšæ³•
export default async function ServerPage() {
  return (
    <StatCard onClick={() => alert('æ— æ³•åºåˆ—åŒ–')} />
  );
}
```

**è§£å†³æ–¹æ¡ˆ**:

#### 1. **ç»„ä»¶å†…éƒ¨å¤„ç†äº¤äº’** (æ¨è)
```typescript
// StatCard ç»„ä»¶å†…éƒ¨å¤„ç†ç‚¹å‡»é€»è¾‘
const StatCard = ({ clickable = false, onClickAction = 'navigate' }) => {
  const handleClick = () => {
    if (!clickable) return;
    
    switch (onClickAction) {
      case 'navigate':
        router.push('/details');
        break;
      case 'modal':
        openModal();
        break;
    }
  };
  
  return <Paper onClick={handleClick}>...</Paper>;
};
```

#### 2. **åˆ›å»ºä¸“ç”¨çš„ Client Component åŒ…è£…å™¨**
```typescript
// components/InteractiveStatCard.tsx
'use client';
import { StatCard } from '@damon-stack/ui';

export function InteractiveStatCard({ onAction, ...props }) {
  return (
    <StatCard
      {...props}
      onClick={() => onAction?.(props.title)}
    />
  );
}

// åœ¨ Server Component ä¸­ä½¿ç”¨
import { InteractiveStatCard } from './components/InteractiveStatCard';

export default async function Dashboard() {
  return (
    <InteractiveStatCard
      title="ç”¨æˆ·æ•°"
      value={1234}
      onAction={(title) => {
        // è¿™ä¸ªå‡½æ•°åœ¨å®¢æˆ·ç«¯æ‰§è¡Œ
        console.log(`ç‚¹å‡»äº† ${title}`);
      }}
    />
  );
}
```

#### 3. **ä½¿ç”¨ URL çŠ¶æ€ç®¡ç†**
```typescript
// é€šè¿‡ URL å‚æ•°æ§åˆ¶æ¨¡æ€æ¡†ç­‰çŠ¶æ€
import { useSearchParams } from 'next/navigation';

const StatCard = ({ detailsPath }) => {
  return (
    <Paper>
      <Link href={detailsPath}>
        {/* å¡ç‰‡å†…å®¹ */}
      </Link>
    </Paper>
  );
};
```

### æ¶æ„å»ºè®®

1. **ä¿æŒ Server Component çš„ä¼˜åŠ¿**: æ•°æ®è·å–ã€SEOã€åˆå§‹åŠ è½½æ€§èƒ½
2. **åˆç†ä½¿ç”¨ Client Component**: ä»…åœ¨éœ€è¦äº¤äº’æ—¶ä½¿ç”¨
3. **çŠ¶æ€ç®¡ç†ç­–ç•¥**: URL > Context > Local State
4. **ç»„ä»¶è®¾è®¡åŸåˆ™**: é«˜å†…èšã€ä½è€¦åˆã€å¯ç»„åˆ

è¿™ç§æ¶æ„ç¡®ä¿äº†æœ€ä½³çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼ŒåŒæ—¶ä¿æŒä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚ 