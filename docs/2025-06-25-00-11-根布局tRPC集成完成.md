# tRPC v10+ é›†æˆç¬¬å…­æ­¥ï¼šæ ¹å¸ƒå±€ tRPC é›†æˆå®Œæˆ

## æ—¶é—´
2025-06-25 00:11:24+12:00

## å®Œæˆå†…å®¹
åœ¨ apps/admin-dashboard åº”ç”¨çš„æ ¹å¸ƒå±€ä¸­æˆåŠŸé›†æˆäº† TRPCReactProviderï¼Œä½¿æ•´ä¸ªåº”ç”¨éƒ½èƒ½è®¿é—® tRPCã€‚

## ä¿®æ”¹çš„æ–‡ä»¶
**æ–‡ä»¶è·¯å¾„ï¼š** `apps/admin-dashboard/app/layout.tsx`

## ä¿®æ”¹å†…å®¹

### 1. å¯¼å…¥å˜æ›´
```tsx
// æ–°å¢å¯¼å…¥
import { TRPCReactProvider } from "../trpc/react";
```

### 2. å…ƒæ•°æ®æ›´æ–°
```tsx
export const metadata: Metadata = {
  title: "Admin Dashboard",
  description: "tRPC + Next.js 13+ App Router ç®¡ç†åå°",
};
```

### 3. Provider åŒ…è£¹
```tsx
<body className={`${geistSans.variable} ${geistMono.variable} antialiased`}>
  <TRPCReactProvider>
    {children}
  </TRPCReactProvider>
</body>
```

## æŠ€æœ¯æ¶æ„

### ç»„ä»¶å±‚æ¬¡ç»“æ„
```
RootLayout (æœåŠ¡ç«¯ç»„ä»¶)
â””â”€â”€ body
    â””â”€â”€ TRPCReactProvider (å®¢æˆ·ç«¯ç»„ä»¶)
        â”œâ”€â”€ api.Provider
        â””â”€â”€ QueryClientProvider
            â””â”€â”€ children (æ‰€æœ‰é¡µé¢å’Œç»„ä»¶)
```

### ä¸Šä¸‹æ–‡ä¼ é€’
- **tRPC ä¸Šä¸‹æ–‡**: é€šè¿‡ `api.Provider` æä¾›
- **React Query ä¸Šä¸‹æ–‡**: é€šè¿‡ `QueryClientProvider` æä¾›
- **ç±»å‹å®‰å…¨**: AppRouter ç±»å‹åœ¨æ•´ä¸ªåº”ç”¨ä¸­å¯ç”¨

## é›†æˆæ•ˆæœ

### å…¨å±€è®¿é—®èƒ½åŠ›
ç°åœ¨æ•´ä¸ªåº”ç”¨çš„ä»»ä½•ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨ï¼š
```tsx
import { api } from '../trpc/react';

// åœ¨ä»»ä½•ç»„ä»¶ä¸­ä½¿ç”¨
const { data, isLoading } = api.post.hello.useQuery({ text: 'World' });
const { data: posts } = api.post.getAll.useQuery();
const { data: post } = api.post.getById.useQuery({ id: 1 });
```

### æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯æ··åˆ
- **layout.tsx**: æœåŠ¡ç«¯ç»„ä»¶ï¼ˆå¤„ç†å…ƒæ•°æ®ã€å­—ä½“ç­‰ï¼‰
- **TRPCReactProvider**: å®¢æˆ·ç«¯ç»„ä»¶ï¼ˆæä¾› React çŠ¶æ€å’Œä¸Šä¸‹æ–‡ï¼‰
- **children**: å¯ä»¥æ˜¯æœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯ç»„ä»¶

## æŠ€æœ¯ç‰¹ç‚¹
âœ… **å…¨å±€å¯ç”¨**: tRPC åœ¨æ•´ä¸ªåº”ç”¨ä¸­éƒ½å¯ä»¥è®¿é—®  
âœ… **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ç«¯åˆ°ç«¯ç±»å‹æ¨æ–­  
âœ… **æ€§èƒ½ä¼˜åŒ–**: React Query ç¼“å­˜å’Œæ‰¹å¤„ç†  
âœ… **æ¶æ„æ¸…æ™°**: æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç»„ä»¶åˆ†å·¥æ˜ç¡®  
âœ… **SEO å‹å¥½**: ä¿æŒæœåŠ¡ç«¯æ¸²æŸ“çš„ä¼˜åŠ¿  

## å®Œæ•´æ–‡ä»¶ç»“æ„
```
apps/admin-dashboard/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx (å·²é›†æˆ TRPCReactProvider)
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ api/trpc/[trpc]/route.ts
â”œâ”€â”€ server/api/
â”‚   â”œâ”€â”€ trpc.ts
â”‚   â”œâ”€â”€ root.ts
â”‚   â””â”€â”€ routers/post.ts
â””â”€â”€ trpc/
    â””â”€â”€ react.tsx
```

## é›†æˆçŠ¶æ€
ğŸ”— **æœåŠ¡ç«¯**: âœ… å®Œæˆ  
ğŸ”— **API è·¯ç”±**: âœ… å®Œæˆ  
ğŸ”— **å®¢æˆ·ç«¯é…ç½®**: âœ… å®Œæˆ  
ğŸ”— **åº”ç”¨é›†æˆ**: âœ… å®Œæˆ  
ğŸ”— **æµ‹è¯•ä½¿ç”¨**: â³ å¾…å®Œæˆ  

## ä¸‹ä¸€æ­¥
ç­‰å¾…ç”¨æˆ·ç¡®è®¤åï¼Œç»§ç»­ç¬¬ä¸ƒæ­¥ï¼šåˆ›å»ºæµ‹è¯•é¡µé¢éªŒè¯ tRPC åŠŸèƒ½ 