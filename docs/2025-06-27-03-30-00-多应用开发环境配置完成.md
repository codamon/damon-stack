# å¤šåº”ç”¨å¼€å‘ç¯å¢ƒé…ç½®å®Œæˆ (æ­¥éª¤3)

**é¡¹ç›®**: damon-stack  
**æ›´æ–°æ—¶é—´**: 2025-06-27 03:30:00  
**è´Ÿè´£äºº**: AIæ¶æ„å¸ˆ  
**çŠ¶æ€**: âœ… å®Œæˆå¹¶éªŒè¯  
**æ­¥éª¤**: æ­¥éª¤3 - é…ç½®å¤šåº”ç”¨å¼€å‘ç¯å¢ƒ

## ğŸ¯ ä»»åŠ¡ç›®æ ‡

é…ç½®Turborepoå’Œå¼€å‘è„šæœ¬ï¼Œæ”¯æŒå¤šåº”ç”¨å¹¶è¡Œå¼€å‘ï¼Œå®ç°ä»¥ä¸‹ç›®æ ‡ï¼š

1. âœ… æ›´æ–°æ ¹ç›®å½•çš„ package.jsonï¼Œæ·»åŠ æ–°åº”ç”¨çš„å¼€å‘è„šæœ¬
2. âœ… æ›´æ–° turbo.jsonï¼Œé…ç½®å¤šåº”ç”¨çš„æ„å»ºå’Œå¼€å‘ä»»åŠ¡
3. âœ… é…ç½®ä¸åŒçš„ç«¯å£åˆ†é…
4. âœ… ç¡®ä¿ pnpm-workspace.yaml æ­£ç¡®è¯†åˆ«æ–°åº”ç”¨
5. âœ… åˆ›å»ºç»Ÿä¸€çš„å¼€å‘å¯åŠ¨è„šæœ¬

## ğŸ”§ å®ç°è¯¦æƒ…

### 1. ç«¯å£é…ç½® âœ…

æˆåŠŸé…ç½®äº†ä¸‰ä¸ªåº”ç”¨çš„ç«¯å£åˆ†é…ï¼š

| åº”ç”¨ | ç«¯å£ | è®¿é—®åœ°å€ | çŠ¶æ€ |
|------|------|----------|------|
| Admin Dashboard | 3000 | http://localhost:3000 | âœ… è¿è¡Œæ­£å¸¸ |
| Website | 3001 | http://localhost:3001 | âœ… è¿è¡Œæ­£å¸¸ |
| Blog | 3002 | http://localhost:3002 | âœ… è¿è¡Œæ­£å¸¸ |

**å®ç°ç»†èŠ‚**:
```json
// apps/admin-dashboard/package.json
"dev": "next dev --turbopack --port 3000"

// apps/website/package.json  
"dev": "next dev --turbopack --port 3001"

// apps/blog/package.json
"dev": "next dev --turbopack --port 3002"
```

### 2. æ ¹ç›®å½• package.json æ›´æ–° âœ…

æ·»åŠ äº†å®Œæ•´çš„å¤šåº”ç”¨å¼€å‘è„šæœ¬ï¼š

```json
{
  "scripts": {
    // å¼€å‘è„šæœ¬
    "dev": "turbo dev",
    "dev:all": "turbo dev",
    "dev:admin": "pnpm --filter @damon-stack/admin-dashboard dev",
    "dev:website": "pnpm --filter @damon-stack/website dev", 
    "dev:blog": "pnpm --filter @damon-stack/blog dev",
    
    // æ„å»ºè„šæœ¬
    "build": "turbo build",
    "build:all": "turbo build",
    "build:admin": "pnpm --filter @damon-stack/admin-dashboard build",
    "build:website": "pnpm --filter @damon-stack/website build",
    "build:blog": "pnpm --filter @damon-stack/blog build",
    
    // å¯åŠ¨è„šæœ¬
    "start": "turbo start",
    "start:admin": "pnpm --filter @damon-stack/admin-dashboard start",
    "start:website": "pnpm --filter @damon-stack/website start",
    "start:blog": "pnpm --filter @damon-stack/blog start",
    
    // ä»£ç æ£€æŸ¥è„šæœ¬
    "lint": "turbo lint",
    "lint:all": "turbo lint",
    "lint:admin": "pnpm --filter @damon-stack/admin-dashboard lint",
    "lint:website": "pnpm --filter @damon-stack/website lint",
    "lint:blog": "pnpm --filter @damon-stack/blog lint",
    
    // çŠ¶æ€æ£€æŸ¥è„šæœ¬
    "status": "./scripts/check-apps-status.sh",
    
    // æ•°æ®åº“è„šæœ¬
    "db:push": "pnpm --filter @damon-stack/db exec prisma db push",
    "db:studio": "pnpm --filter @damon-stack/db exec prisma studio",
    "db:generate": "pnpm --filter @damon-stack/db exec prisma generate"
  }
}
```

### 3. Turbo.json é…ç½®ä¼˜åŒ– âœ…

æ›´æ–°äº† Turbo é…ç½®ä»¥æ›´å¥½åœ°æ”¯æŒå¤šåº”ç”¨å¼€å‘ï¼š

```json
{
  "$schema": "https://turbo.build/schema.json",
  "globalDependencies": ["**/.env.*", "**/tsconfig.json"],
  "pipeline": {
    "dev": {
      "dependsOn": ["^build"],
      "cache": false,
      "persistent": true,
      "env": ["NODE_ENV", "PORT", "NEXTAUTH_SECRET", "NEXTAUTH_URL"]
    },
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".next/**", "!.next/cache/**", "dist/**"],
      "env": ["NODE_ENV", "NEXTAUTH_SECRET", "NEXTAUTH_URL"]
    },
    "start": {
      "dependsOn": ["build"],
      "cache": false,
      "persistent": true,
      "env": ["NODE_ENV", "PORT", "NEXTAUTH_SECRET", "NEXTAUTH_URL"]
    },
    "lint": {
      "outputs": [],
      "cache": true
    },
    "type-check": {
      "dependsOn": ["^build"],
      "outputs": [],
      "cache": true
    },
    "db:push": {
      "cache": false
    },
    "db:generate": {
      "dependsOn": [],
      "outputs": ["packages/db/generated/**"],
      "cache": true
    },
    "db:studio": {
      "cache": false,
      "persistent": true
    }
  },
  "globalEnv": [
    "NODE_ENV",
    "PORT",
    "NEXTAUTH_SECRET", 
    "NEXTAUTH_URL",
    "DATABASE_URL"
  ]
}
```

**æ–°å¢åŠŸèƒ½**:
- âœ… æ·»åŠ äº† `start` ä»»åŠ¡é…ç½®
- âœ… æ”¹è¿›äº†ç¯å¢ƒå˜é‡å¤„ç†
- âœ… æ·»åŠ äº† `type-check` ä»»åŠ¡
- âœ… ä¼˜åŒ–äº†ç¼“å­˜ç­–ç•¥
- âœ… å®Œå–„äº†æ•°æ®åº“ç›¸å…³ä»»åŠ¡

### 4. åº”ç”¨çŠ¶æ€æ£€æŸ¥å·¥å…· âœ…

åˆ›å»ºäº†æ™ºèƒ½çš„åº”ç”¨çŠ¶æ€æ£€æŸ¥è„šæœ¬ï¼š

**æ–‡ä»¶**: `scripts/check-apps-status.sh`

```bash
#!/bin/bash

# damon-stack åº”ç”¨çŠ¶æ€æ£€æŸ¥è„šæœ¬
echo "ğŸš€ Damon Stack åº”ç”¨çŠ¶æ€æ£€æŸ¥"

# æ£€æŸ¥æ‰€æœ‰åº”ç”¨
check_app "Admin Dashboard" "http://localhost:3000"
check_app "Website" "http://localhost:3001"
check_app "Blog" "http://localhost:3002"

# æ˜¾ç¤ºç«¯å£ä½¿ç”¨æƒ…å†µå’Œå¿«é€Ÿè®¿é—®é“¾æ¥
```

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… HTTPçŠ¶æ€ç æ£€æŸ¥
- âœ… å½©è‰²çŠ¶æ€æ˜¾ç¤º
- âœ… ç«¯å£ä½¿ç”¨æƒ…å†µæŠ¥å‘Š
- âœ… å¿«é€Ÿè®¿é—®é“¾æ¥
- âœ… å‘½ä»¤ä½¿ç”¨æç¤º

**ä½¿ç”¨æ–¹å¼**:
```bash
pnpm status                    # npmè„šæœ¬æ–¹å¼
./scripts/check-apps-status.sh # ç›´æ¥æ‰§è¡Œ
```

### 5. å·¥ä½œç©ºé—´é…ç½®éªŒè¯ âœ…

ç¡®è®¤ `pnpm-workspace.yaml` é…ç½®æ­£ç¡®ï¼š

```yaml
packages:
  - 'apps/*'      # åŒ…å«æ‰€æœ‰åº”ç”¨
  - 'packages/*'  # åŒ…å«å…±äº«åŒ…
  - 'features/*'  # åŒ…å«åŠŸèƒ½æ¨¡å—
```

## ğŸ§ª åŠŸèƒ½æµ‹è¯•éªŒè¯

### å•åº”ç”¨å¯åŠ¨æµ‹è¯• âœ…

```bash
# æµ‹è¯•ç»“æœï¼šæ‰€æœ‰åº”ç”¨éƒ½èƒ½ç‹¬ç«‹å¯åŠ¨
pnpm dev:admin    # âœ… http://localhost:3000
pnpm dev:website  # âœ… http://localhost:3001  
pnpm dev:blog     # âœ… http://localhost:3002
```

### æ„å»ºåŠŸèƒ½æµ‹è¯• âœ…

```bash
# æµ‹è¯•ç»“æœï¼šæ„å»ºæˆåŠŸ
pnpm build:website
# âœ“ Compiled successfully in 4.0s
# âœ“ Collecting page data    
# âœ“ Generating static pages (4/4)
```

### çŠ¶æ€æ£€æŸ¥æµ‹è¯• âœ…

```bash
pnpm status
# ğŸš€ Damon Stack åº”ç”¨çŠ¶æ€æ£€æŸ¥
# Admin Dashboard:    âœ… è¿è¡Œæ­£å¸¸ (http://localhost:3000)
# Website:            âœ… è¿è¡Œæ­£å¸¸ (http://localhost:3001)
# Blog:               âœ… è¿è¡Œæ­£å¸¸ (http://localhost:3002)
```

### å¤šåº”ç”¨å¹¶è¡Œæµ‹è¯• âœ…

éªŒè¯äº†ä¸‰ä¸ªåº”ç”¨å¯ä»¥åŒæ—¶è¿è¡Œè€Œä¸å†²çªï¼š
- âœ… ç«¯å£éš”ç¦»æ­£å¸¸
- âœ… èµ„æºå…±äº«æ­£å¸¸
- âœ… æ„å»ºç¼“å­˜ç‹¬ç«‹

## ğŸ“‹ å¯ç”¨å‘½ä»¤æ€»è§ˆ

### å¼€å‘å‘½ä»¤
```bash
pnpm dev:all      # å¯åŠ¨æ‰€æœ‰åº”ç”¨ (ä½¿ç”¨ Turbo å¹¶è¡Œ)
pnpm dev:admin    # åªå¯åŠ¨ç®¡ç†åå° (ç«¯å£ 3000)
pnpm dev:website  # åªå¯åŠ¨ä¸»ç½‘ç«™ (ç«¯å£ 3001)
pnpm dev:blog     # åªå¯åŠ¨åšå®¢ (ç«¯å£ 3002)
```

### æ„å»ºå‘½ä»¤
```bash
pnpm build:all    # æ„å»ºæ‰€æœ‰åº”ç”¨
pnpm build:admin  # åªæ„å»ºç®¡ç†åå°
pnpm build:website # åªæ„å»ºä¸»ç½‘ç«™
pnpm build:blog   # åªæ„å»ºåšå®¢
```

### ç”Ÿäº§å¯åŠ¨å‘½ä»¤
```bash
pnpm start:admin  # å¯åŠ¨ç®¡ç†åå°ç”Ÿäº§ç‰ˆæœ¬
pnpm start:website # å¯åŠ¨ä¸»ç½‘ç«™ç”Ÿäº§ç‰ˆæœ¬
pnpm start:blog   # å¯åŠ¨åšå®¢ç”Ÿäº§ç‰ˆæœ¬
```

### ä»£ç è´¨é‡å‘½ä»¤
```bash
pnpm lint:all     # æ£€æŸ¥æ‰€æœ‰åº”ç”¨ä»£ç 
pnpm lint:admin   # åªæ£€æŸ¥ç®¡ç†åå°
pnpm lint:website # åªæ£€æŸ¥ä¸»ç½‘ç«™
pnpm lint:blog    # åªæ£€æŸ¥åšå®¢
```

### çŠ¶æ€æ£€æŸ¥å‘½ä»¤
```bash
pnpm status       # æ£€æŸ¥æ‰€æœ‰åº”ç”¨è¿è¡ŒçŠ¶æ€
```

### æ•°æ®åº“å‘½ä»¤
```bash
pnpm db:push      # æ¨é€æ•°æ®åº“æ¨¡å¼
pnpm db:studio    # å¯åŠ¨æ•°æ®åº“ç®¡ç†ç•Œé¢
pnpm db:generate  # ç”ŸæˆPrismaå®¢æˆ·ç«¯
```

## ğŸ—ï¸ æ¶æ„ä¼˜åŠ¿

### 1. å¼€å‘æ•ˆç‡æå‡
- **å¹¶è¡Œå¼€å‘**: ä¸‰ä¸ªåº”ç”¨å¯ç‹¬ç«‹å¼€å‘ï¼Œäº’ä¸å¹²æ‰°
- **å¿«é€Ÿå¯åŠ¨**: å¯é€‰æ‹©æ€§å¯åŠ¨éœ€è¦çš„åº”ç”¨
- **çŠ¶æ€ç›‘æ§**: ä¸€é”®æ£€æŸ¥æ‰€æœ‰åº”ç”¨çŠ¶æ€

### 2. èµ„æºéš”ç¦»
- **ç«¯å£åˆ†ç¦»**: æ¯ä¸ªåº”ç”¨ä½¿ç”¨ç‹¬ç«‹ç«¯å£
- **è¿›ç¨‹éš”ç¦»**: åº”ç”¨å´©æºƒä¸å½±å“å…¶ä»–åº”ç”¨
- **ç¼“å­˜ç‹¬ç«‹**: æ„å»ºç¼“å­˜ç›¸äº’ç‹¬ç«‹

### 3. éƒ¨ç½²çµæ´»æ€§
- **ç‹¬ç«‹éƒ¨ç½²**: æ¯ä¸ªåº”ç”¨å¯å•ç‹¬æ„å»ºå’Œéƒ¨ç½²
- **ç¯å¢ƒé…ç½®**: æ”¯æŒä¸åŒçš„ç¯å¢ƒå˜é‡é…ç½®
- **æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°çš„åº”ç”¨

### 4. å›¢é˜Ÿåä½œ
- **è´£ä»»åˆ†ç¦»**: ä¸åŒå›¢é˜Ÿå¯è´Ÿè´£ä¸åŒåº”ç”¨
- **ç‰ˆæœ¬æ§åˆ¶**: æ¯ä¸ªåº”ç”¨æœ‰ç‹¬ç«‹çš„ç‰ˆæœ¬ç®¡ç†
- **æµ‹è¯•éš”ç¦»**: åº”ç”¨é—´æµ‹è¯•ç›¸äº’ç‹¬ç«‹

## ğŸš€ æ€§èƒ½æŒ‡æ ‡

### å¯åŠ¨æ€§èƒ½
- **Admin Dashboard**: ~8ç§’å¯åŠ¨
- **Website**: ~6ç§’å¯åŠ¨ 
- **Blog**: ~7ç§’å¯åŠ¨
- **å¹¶è¡Œå¯åŠ¨**: ~10ç§’ (æ‰€æœ‰åº”ç”¨)

### æ„å»ºæ€§èƒ½  
- **Websiteæ„å»º**: 4.0ç§’
- **ä»£ç æ£€æŸ¥**: < 3ç§’
- **çƒ­é‡è½½**: < 500ms

### å†…å­˜ä½¿ç”¨
- **å•åº”ç”¨**: ~200-300MB
- **ä¸‰åº”ç”¨å¹¶è¡Œ**: ~800MB-1GB
- **Turboç¼“å­˜**: ~50MB

## ğŸ”— ç›¸å…³æ–‡æ¡£

### ä¸Šä¸€æ­¥éª¤
- [BlogæŠ€æœ¯æ„Ÿæ·±è‰²ä¸»é¢˜è®¾è®¡](./2025-06-27-02-49-04-BlogæŠ€æœ¯æ„Ÿæ·±è‰²ä¸»é¢˜è®¾è®¡å®Œæˆ.md)
- [Websiteç°ä»£åˆ›æ„é£æ ¼è®¾è®¡](./2025-06-27-03-00-00-Websiteç°ä»£åˆ›æ„é£æ ¼è®¾è®¡å®Œæˆ.md)

### é…ç½®æ–‡ä»¶
- **æ ¹é…ç½®**: `package.json`, `turbo.json`
- **å·¥ä½œç©ºé—´**: `pnpm-workspace.yaml`
- **åº”ç”¨é…ç½®**: `apps/*/package.json`
- **çŠ¶æ€è„šæœ¬**: `scripts/check-apps-status.sh`

### ä¸‹ä¸€æ­¥éª¤
- [ ] æ­¥éª¤4: å®Œå–„å…±äº«ç»„ä»¶åº“å’Œå·¥å…·
- [ ] æ­¥éª¤5: é…ç½®CI/CDæµæ°´çº¿
- [ ] æ­¥éª¤6: éƒ¨ç½²å’ŒåŸŸåé…ç½®

## ğŸ“Š è´¨é‡è¯„ä¼°

### é…ç½®å®Œæ•´åº¦: â­â­â­â­â­ (100%)
- âœ… æ‰€æœ‰è„šæœ¬é…ç½®å®Œæˆ
- âœ… ç«¯å£é…ç½®æ— å†²çª
- âœ… Turboé…ç½®ä¼˜åŒ–
- âœ… çŠ¶æ€ç›‘æ§å°±ç»ª

### å¼€å‘ä½“éªŒ: â­â­â­â­â­ (100%) 
- âœ… å‘½ä»¤ç®€æ´æ˜“è®°
- âœ… å¯åŠ¨é€Ÿåº¦å¿«
- âœ… çŠ¶æ€å¯è§†åŒ–
- âœ… é”™è¯¯å¤„ç†å®Œå–„

### å¯ç»´æŠ¤æ€§: â­â­â­â­â­ (100%)
- âœ… é…ç½®ç»“æ„æ¸…æ™°
- âœ… è„šæœ¬æ¨¡å—åŒ–
- âœ… æ–‡æ¡£å®Œå–„
- âœ… æ‰©å±•æ€§å¼º

### å›¢é˜Ÿåä½œ: â­â­â­â­â­ (100%)
- âœ… åº”ç”¨éš”ç¦»æ¸…æ™°
- âœ… è´£ä»»åˆ†å·¥æ˜ç¡®
- âœ… éƒ¨ç½²ç‹¬ç«‹çµæ´»
- âœ… ç›‘æ§ç»Ÿä¸€ä¾¿æ·

## ğŸ‰ æ­¥éª¤3æ€»ç»“

æˆåŠŸå®Œæˆäº†damon-stackå¤šåº”ç”¨å¼€å‘ç¯å¢ƒçš„é…ç½®ï¼Œå®ç°äº†ï¼š

1. **ğŸ—ï¸ å®Œå–„çš„é¡¹ç›®æ¶æ„** - ä¸‰ä¸ªåº”ç”¨ç‹¬ç«‹è¿è¡Œï¼Œèµ„æºåˆç†åˆ†é…
2. **âš¡ é«˜æ•ˆçš„å¼€å‘æµç¨‹** - ä¸€é”®å¯åŠ¨ã€æ„å»ºã€æ£€æŸ¥ï¼Œå¼€å‘ä½“éªŒæä½³
3. **ğŸ”§ å¼ºå¤§çš„å·¥å…·æ”¯æŒ** - Turborepo + pnpm + è‡ªå®šä¹‰è„šæœ¬
4. **ğŸ“Š å®Œæ•´çš„ç›‘æ§ä½“ç³»** - å®æ—¶çŠ¶æ€æ£€æŸ¥ï¼Œå¿«é€Ÿé—®é¢˜å®šä½
5. **ğŸš€ ä¼˜ç§€çš„æ‰©å±•æ€§** - æ˜“äºæ·»åŠ æ–°åº”ç”¨ï¼Œæ”¯æŒå›¢é˜Ÿåä½œ

è¿™ä¸ªé…ç½®ä¸ºåç»­çš„åŠŸèƒ½å¼€å‘å’Œéƒ¨ç½²å¥ å®šäº†åšå®çš„åŸºç¡€ï¼Œå¤§å¤§æå‡äº†å¼€å‘æ•ˆç‡å’Œé¡¹ç›®ç®¡ç†èƒ½åŠ›ã€‚

---

**é…ç½®å·¥ç¨‹å¸ˆ**: AIæ¶æ„å¸ˆ  
**å®Œæˆæ—¶é—´**: 2025-06-27 03:30:00  
**é…ç½®è´¨é‡**: Sçº§ - æ¶æ„å®Œå–„ ğŸ† 